@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    @*<meta name="viewport" content="width=1280" />*@
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" href="~/favicon.ico" />
    <title>FET Login</title>

    <link rel="stylesheet" href="~/lib/viho/assets/css/bootstrap.css" />
    <link rel="stylesheet" href="~/lib/viho/assets/css/fontawesome.css" />

    <style>
        html {
            background-color: transparent;
            background-image: url("@Url.Content("~/lib/login/image/login_image.png")");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            background-attachment: fixed;
        }

        html {
            position: relative;
            min-height: 100%;
            background-color: #f4f4f4;
            font-family: Verdana, sans-serif;
            font-size: 16px;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: transparent;
            font-family: Verdana, sans-serif;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        .login-view .logo {
            width: 180px;
            -webkit-user-drag: none;
        }

        .login-view .form-mask {
            background-color: white;
            border-radius: 10px;
            border: solid 1px #e6e6e6;
            padding: 30px 60px;
        }

        .login-view th, td {
            text-align: center;
            vertical-align: middle;
        }

        .login-view thead {
            border-bottom: solid #808080;
        }

        #PdEye {
            width: 20px;
        }

        .login-view .login-table {
            max-width: 600px;
        }

        .login-view .login-info {
            max-width: 800px;
        }

        .btn-confirm {
            color: #fff;
            background: #666;
            border-color: transparent;
        }
    </style>
</head>
<body>
    <div class="login-view container-fluid">
        <div class="row justify-content-center">
            <div class="login-table col-12 col-sm-10 col-md-8 mt-sm-3 p-0 d-flex justify-content-center">
                <div class="form-mask row  w-100">
                    <form id="LoginForm" method="post">
                        <div class="mb-3 d-flex flex-column align-items-center">
                            <img class="logo" src="~/lib/login/image/fet_log_new.png" />
                            <span class="display-6 text-center fw-bold">Facilities T.T</span>
                        </div>
                        <div>
                            <label for="Role" class="form-label">使用者 </label>
                            <select id="Role" class="form-control">
                                <option value="VENDER">廠商</option>
                            </select>
                        </div>
                        <hr/>
                        <div class="mt-3">
                            <label for="Act" class="form-label">帳號 </label>
                            <input type="text" class="form-control" id="AC" autocomplete="username" placeholder="" />
                        </div>

                        <div class="mt-1">
                            <label for="Pd" class="form-label">密碼</label>
                            <div class="input-group">
                                <input id="PD" type="password" class="form-control" autocomplete="current-password" placeholder="" />
                                <div id="PdDisplay" class="input-group-text">
                                    <i class="fa fa-eye" id="PdEye"></i>
                                </div>
                            </div>
                        </div>

                        <div id="errorMsg" class="mt-1  text-center text-danger">

                        </div>

                        <div class="mt-4 text-center">
                            <button type="submit" class="btn btn-confirm px-4 py-2">登入</button>
                        </div>

                        <br />

                        @* <div class="d-flex justify-content-center">
                            <span>請使用[<a href="javascript:void(0)">NT Account</a>]與[<a href="javascript:void(0)">密碼</a>]登入</span>
                        </div> *@

                        <br />

                        <div class="d-flex justify-content-center">
                            <span class="fs-3 text-nowrap"><b>請使用[<a href="javascript:void(0)">Chrome</a>]瀏覽器開啟 !!</b></span>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        @* <div class="row mt-2 justify-content-center">
            <div class="login-info col-12 col-sm-10 p-0 d-flex justify-content-center">
                <div class="form-mask w-100 d-flex justify-content-center">
                    <table class="login-table w-100">
                        <thead>
                            <tr>
                                <th>
                                    使用手冊
                                </th>
                                <th>
                                    公告事項
                                </th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>
            </div>
        </div> *@
    </div>

    <div id="loader-mask" style="position:fixed; top:0 ;width:100%;height:100%;background-color:#80808080;display:none">

    </div>
    <script src="~/lib/viho/assets/js/jquery-3.5.1.min.js"></script>
    <script>
        const $Loder = $('#loader-mask');

        function detectIEEdge() {
            var ua = window.navigator.userAgent;

            var msie = ua.indexOf('MSIE ');
            if (msie > 0) {
                // IE 10 or older => return version number
                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
            }

            var trident = ua.indexOf('Trident/');
            if (trident > 0) {
                // IE 11 => return version number
                var rv = ua.indexOf('rv:');
                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
            }

            var edge = ua.indexOf('Edge/');
            if (edge > 0) {
                // Edge => return version number
                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
            }

            // other browser
            return false;
        }
        //IE瀏覽器跳提示
        if (detectIEEdge()) {
            alert("請使用Chrome瀏覽器開啟");
        }

        $(async function () {

            //檢視密碼鈕
            $('#PdDisplay').click(function (e) {
                $('#PdEye').toggleClass('fa-eye');
                $('#PdEye').toggleClass('fa-eye-slash');
                let setPdType = $('#PD').prop('type') == 'password' ? 'text' : 'password';
                $('#PD').prop('type', setPdType);
            });


            //FormSubmit事件註冊
            $('#LoginForm').submit(async function (e) {
                e.preventDefault();
                let role = $('#Role').val();
                let ac = $('#AC').val();
                let pd = $('#PD').val();
                let $errorMsg = $('#errorMsg');

                if (!ac  || !pd ) {
                  $errorMsg.html("請填入帳號、密碼");
                    return;
                } 
                $errorMsg.html("");
                $Loder.show();

                $.ajax({
                    url: '@Url.Action("Login", "Login")',
                    type: 'POST',
                    data: {
                        Role: role,
                        AC: ac,
                        PD: pd
                    },
                    success: function (data) {

                        if (data.Success) {
                            window.location.href = "@Url.Action("Index", "Home")";
                        } else {
                            $errorMsg.html(data.Message);
                        }
                    },
                    error: function (xhr, status, error) {
                        $errorMsg.html("登入失敗，請稍後再試。");
                    }
                }).always(()=>{
                    $Loder.hide();
                })
                
            });



        });

        
    </script>
</body>
</html>


